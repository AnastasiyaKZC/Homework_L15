# Homework_L15 - Pytest. Сергей Хомутинин

- [Ссылка на занятие](https://school.qa.guru/pl/teach/control/lesson/view?id=334954977&editMode=0) 
- [Ссылка на лекцию ч.1](https://github.com/qa-guru/knowledge-base/wiki/13.-Pytest)
- [Ссылка на лекцию ч.2](https://github.com/qa-guru/knowledge-base/wiki/14.-Pytest.-%D0%A7%D0%B0%D1%81%D1%82%D1%8C-II)
- [Ссылка на репозиторий 1](https://github.com/qa-guru/qa_guru_python_5_15)
- [Ссылка на репозиторий 2](https://github.com/qa-guru/qa_guru_python_5_15_p2) 

## Полезные ссылки: 
- [Хуки в документации](https://docs.pytest.org/en/7.2.x/reference/reference.html#hooks) 
- [Решение проблемы с session-scope фикстурами при параллельном тестировании](https://pytest-xdist.readthedocs.io/en/latest/how-to.html#making-session-scoped-fixtures-execute-only-once) 
- [https://github.com/pytest-dev/pytest/issues/3261#issuecomment-369740536](https://github.com/pytest-dev/pytest/issues/3261#issuecomment-369740536)




### Структура лекции

- Аргументы запуска. Собираем фикстуры, марки, и другую полезную информацию для отладки
- `--co` *(собирает тесты, но не запускает их. Показывает структуру тестов, их имена, фикстуры и марки. Полезно для отладки.)*
- `-k` *(запускает только те тесты, которые соответствуют выражению. Например, `-k "login"` запустит только тесты с `login` в названии.)*
- `-m` *(запускает только тесты с указанным маркером. Например, `-m slow` запустит тесты с `@pytest.mark.slow`.)*
- `--markers` *(список доступных маркеров в тестовом проекте. Маркеры (`@pytest.mark.<имя>`) позволяют группировать тесты и запускать их выборочно.)*
- `--fixtures` *(Фикстуры (`@pytest.fixture`) позволяют задавать предварительное состояние тестов, например, инициализировать базу данных или моки API.)*
- `--durations=10` *(показывает 10 самых долгих тестов, чтобы найти узкие места в производительности.)*
- `-v` *(подробный вывод тестов (имена тестов, параметры, статусы).)*
- `-l (--showlocals)` *(при ошибках показывает локальные переменные для упрощения отладки.)*
- `--setup-plan` *(показывает порядок выполнения фикстур и хуков перед запуском тестов. Это помогает понять, какие зависимости создаются перед тестами.)*


- Марки. Пропускаем тесты правильно
  - `skip` (полностью пропускает тест)
  - `xfail` (ожидаемый провал. Если тест упадёт – XFAIL, если пройдёт – XPASS (значит, баг исправлен))
  - `usefixtures` (автоматически применяет фикстуру)



- Параметризация. На тесте, на фикстуре. Переопределение параметров
  - pytest.mark.parametrize на тесте. Использование нескольких параметров
  - параметризация фикстуры. 
  - indirect параметризация

  
- ДЗ - github.com в мобильном и десктопном варианте. 
- Реализовать автотест для github.com, который заходит на страницу, ищет кнопку Sign In, и тыкает на нее (авторизоваться не нужно)
- Нужно параметризовать тест различным размером окна браузера.
- Обратите внимание, что тест на мобильную версию будет отличаться из-за изменения структуры локаторов.
- Сделайте три варианта пропуска неподходящих параметров и тестов
  1. Пропустите мобильный тест, если соотношение сторон десктопное (и наоборот)
  2. Переопределите параметр с помощью indirect
  3. Сделайте разные фикстуры для каждого теста
В чем преимущества и недостатки каждого из подходов?